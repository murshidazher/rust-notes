"use strict";(self.webpackChunksnake_game_wasm=self.webpackChunksnake_game_wasm||[]).push([[602],{602:(t,n,e)=>{e.r(n);var r=e(115);(0,r.ZP)().then((t=>{const n=20,e=(16,Math.floor(16*Math.random()));const o=r.q3.new(4,e),_=o.width(),i=document.getElementById("points"),a=document.getElementById("game-status"),s=document.getElementById("game-control-btn"),c=document.getElementById("snake-canvas"),u=c.getContext("2d");c.height=_*n,c.width=_*n,s.addEventListener("click",(t=>{o.game_status()?location.reload():(s.textContent="Playing...",o.start_game(),l())}));const w={ArrowUp:r.Nm.Up,ArrowRight:r.Nm.Right,ArrowDown:r.Nm.Down,ArrowLeft:r.Nm.Left};function g(){!function(){u.beginPath();for(let t=0;t<_+1;t++)u.moveTo(n*t,0),u.lineTo(n*t,_*n);for(let t=0;t<_+1;t++)u.moveTo(0,n*t),u.lineTo(_*n,n*t);u.stroke()}(),function(){const e=new Uint32Array(t.memory.buffer,o.snake_cells(),o.snake_length());e.slice().reverse().forEach(((t,r)=>{const o=t%_,i=Math.floor(t/_);u.fillStyle=r===e.length-1?"#7878db":"#000000",u.beginPath(),u.fillRect(o*n,i*n,n,n)})),u.stroke()}(),function(){const t=o.reward_cell(),e=t%_,r=Math.floor(t/_);u.beginPath(),u.fillStyle="#FF0000",u.fillRect(e*n,r*n,n,n),u.stroke()}(),a.textContent=o.game_status_text(),i.textContent=o.points().toString()}function l(){const t=o.game_status();[r.XI.Won,r.XI.Lost].includes(t)?s.textContent="Re-Play":setTimeout((()=>{console.log("Playing!"),u.clearRect(0,0,c.width,c.height),o.step(),g(),requestAnimationFrame(l)}),1e3/3)}document.addEventListener("keydown",(t=>{o.change_snake_dir(w[t.code])})),g()}))},115:(t,n,e)=>{let r;e.d(n,{Nm:()=>d,XI:()=>b,ZP:()=>p,q3:()=>h}),t=e.hmd(t);const o=new Array(128).fill(void 0);function _(t){return o[t]}o.push(void 0,null,!0,!1);let i=o.length;function a(t){const n=_(t);return function(t){t<132||(o[t]=i,i=t)}(t),n}const s="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&s.decode();let c=null;function u(t,n){return t>>>=0,s.decode((null!==c&&0!==c.byteLength||(c=new Uint8Array(r.memory.buffer)),c).subarray(t,t+n))}function w(t){i===o.length&&o.push(o.length+1);const n=i;return i=o[n],o[n]=t,n}let g=null;function l(){return null!==g&&0!==g.byteLength||(g=new Int32Array(r.memory.buffer)),g}function f(t,n){try{return t.apply(this,n)}catch(t){r.__wbindgen_exn_store(w(t))}}const b=Object.freeze({Won:0,0:"Won",Lost:1,1:"Lost",Played:2,2:"Played"}),d=Object.freeze({Up:0,0:"Up",Right:1,1:"Right",Down:2,2:"Down",Left:3,3:"Left"});class h{static __wrap(t){t>>>=0;const n=Object.create(h.prototype);return n.__wbg_ptr=t,n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();r.__wbg_world_free(t)}static new(t,n){const e=r.world_new(t,n);return h.__wrap(e)}width(){return r.world_width(this.__wbg_ptr)>>>0}points(){return r.world_points(this.__wbg_ptr)>>>0}reward_cell(){try{const e=r.__wbindgen_add_to_stack_pointer(-16);r.world_reward_cell(e,this.__wbg_ptr);var t=l()[e/4+0],n=l()[e/4+1];return 0===t?void 0:n>>>0}finally{r.__wbindgen_add_to_stack_pointer(16)}}snake_head_idx(){return r.world_snake_head_idx(this.__wbg_ptr)>>>0}start_game(){r.world_start_game(this.__wbg_ptr)}game_status(){const t=r.world_game_status(this.__wbg_ptr);return 3===t?void 0:t}game_status_text(){let t,n;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.world_game_status_text(_,this.__wbg_ptr);var e=l()[_/4+0],o=l()[_/4+1];return t=e,n=o,u(e,o)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,n,1)}}change_snake_dir(t){r.world_change_snake_dir(this.__wbg_ptr,t)}snake_length(){return r.world_snake_length(this.__wbg_ptr)>>>0}snake_cells(){return r.world_snake_cells(this.__wbg_ptr)}step(){r.world_step(this.__wbg_ptr)}}function m(){const n={wbg:{}};return n.wbg.__wbg_getRandomValues_37fa2ca9e4e07fab=function(){return f((function(t,n){_(t).getRandomValues(_(n))}),arguments)},n.wbg.__wbindgen_object_drop_ref=function(t){a(t)},n.wbg.__wbg_randomFillSync_dc1e9a60c158336d=function(){return f((function(t,n){_(t).randomFillSync(a(n))}),arguments)},n.wbg.__wbg_crypto_c48a774b022d20ac=function(t){return w(_(t).crypto)},n.wbg.__wbindgen_is_object=function(t){const n=_(t);return"object"==typeof n&&null!==n},n.wbg.__wbg_process_298734cf255a885d=function(t){return w(_(t).process)},n.wbg.__wbg_versions_e2e78e134e3e5d01=function(t){return w(_(t).versions)},n.wbg.__wbg_node_1cd7a5d853dbea79=function(t){return w(_(t).node)},n.wbg.__wbindgen_is_string=function(t){return"string"==typeof _(t)},n.wbg.__wbg_msCrypto_bcb970640f50a1e8=function(t){return w(_(t).msCrypto)},n.wbg.__wbg_require_8f08ceecec0f4fee=function(){return f((function(){return w(t.require)}),arguments)},n.wbg.__wbindgen_is_function=function(t){return"function"==typeof _(t)},n.wbg.__wbindgen_string_new=function(t,n){return w(u(t,n))},n.wbg.__wbg_newnoargs_581967eacc0e2604=function(t,n){return w(new Function(u(t,n)))},n.wbg.__wbg_call_cb65541d95d71282=function(){return f((function(t,n){return w(_(t).call(_(n)))}),arguments)},n.wbg.__wbindgen_object_clone_ref=function(t){return w(_(t))},n.wbg.__wbg_self_1ff1d729e9aae938=function(){return f((function(){return w(self.self)}),arguments)},n.wbg.__wbg_window_5f4faef6c12b79ec=function(){return f((function(){return w(window.window)}),arguments)},n.wbg.__wbg_globalThis_1d39714405582d3c=function(){return f((function(){return w(globalThis.globalThis)}),arguments)},n.wbg.__wbg_global_651f05c6a0944d1c=function(){return f((function(){return w(e.g.global)}),arguments)},n.wbg.__wbindgen_is_undefined=function(t){return void 0===_(t)},n.wbg.__wbg_call_01734de55d61e11d=function(){return f((function(t,n,e){return w(_(t).call(_(n),_(e)))}),arguments)},n.wbg.__wbg_buffer_085ec1f694018c4f=function(t){return w(_(t).buffer)},n.wbg.__wbg_newwithbyteoffsetandlength_6da8e527659b86aa=function(t,n,e){return w(new Uint8Array(_(t),n>>>0,e>>>0))},n.wbg.__wbg_new_8125e318e6245eed=function(t){return w(new Uint8Array(_(t)))},n.wbg.__wbg_set_5cf90238115182c3=function(t,n,e){_(t).set(_(n),e>>>0)},n.wbg.__wbg_newwithlength_e5d69174d6984cd7=function(t){return w(new Uint8Array(t>>>0))},n.wbg.__wbg_subarray_13db269f57aa838d=function(t,n,e){return w(_(t).subarray(n>>>0,e>>>0))},n.wbg.__wbindgen_throw=function(t,n){throw new Error(u(t,n))},n.wbg.__wbindgen_memory=function(){return w(r.memory)},n}async function y(t){if(void 0!==r)return r;void 0===t&&(t=new URL(e(482),e.b));const n=m();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:_}=await async function(t,n){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,n)}catch(n){if("application/wasm"==t.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const e=await t.arrayBuffer();return await WebAssembly.instantiate(e,n)}{const e=await WebAssembly.instantiate(t,n);return e instanceof WebAssembly.Instance?{instance:e,module:t}:e}}(await t,n);return function(t,n){return r=t.exports,y.__wbindgen_wasm_module=n,g=null,c=null,r}(o,_)}const p=y},482:(t,n,e)=>{t.exports=e.p+"a7f362c0bfab0e209142.wasm"}}]);